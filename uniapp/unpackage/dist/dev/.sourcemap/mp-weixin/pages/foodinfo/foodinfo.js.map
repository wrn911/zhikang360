{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/86182/Desktop/项目实训/智康360/takeaway/uniapp/pages/foodinfo/foodinfo.vue?817a","webpack:///C:/Users/86182/Desktop/项目实训/智康360/takeaway/uniapp/pages/foodinfo/foodinfo.vue?ca82","webpack:///C:/Users/86182/Desktop/项目实训/智康360/takeaway/uniapp/pages/foodinfo/foodinfo.vue?1305","webpack:///C:/Users/86182/Desktop/项目实训/智康360/takeaway/uniapp/pages/foodinfo/foodinfo.vue?cf00","uni-app:///pages/foodinfo/foodinfo.vue","webpack:///C:/Users/86182/Desktop/项目实训/智康360/takeaway/uniapp/pages/foodinfo/foodinfo.vue?a957","webpack:///C:/Users/86182/Desktop/项目实训/智康360/takeaway/uniapp/pages/foodinfo/foodinfo.vue?aa33"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","dietPreferences","avoidFoods","willingness","customDiet","customAvoid","dietOptions","value","label","avoidOptions","submitStatus","computed","isFormValid","methods","handleDietPreference","handleAvoidFood","handleSliderChange","addCustomDiet","addCustomAvoid","getLabel","handleSubmit","formData","preferences","avoids","uni","url","method","res","type","message","resetForm"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACsC;;;AAG7F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1CA;AAAA;AAAA;AAAA;AAAkmB,CAAgB,4nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCgFtnB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,cACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAC,eACA;QAAAF;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAE;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAC;kBACAC,wDACA,yDACA,0DACA;kBACAC,mDACA,oDACA,4DACA;kBACApB;gBACA;gBAAA;gBAAA,OAEAqB;kBACAC;kBACAC;kBACA1B;gBACA;cAAA;gBAJA2B;gBAMA;kBAAAC;kBAAAC;gBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA;kBAAAD;kBAAAC;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxKA;AAAA;AAAA;AAAA;AAAqqC,CAAgB,2oCAAG,EAAC,C;;;;;;;;;;;ACAzrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/foodinfo/foodinfo.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/foodinfo/foodinfo.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./foodinfo.vue?vue&type=template&id=1b9eb7f4&scoped=true&\"\nvar renderjs\nimport script from \"./foodinfo.vue?vue&type=script&lang=js&\"\nexport * from \"./foodinfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./foodinfo.vue?vue&type=style&index=0&id=1b9eb7f4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b9eb7f4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/foodinfo/foodinfo.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./foodinfo.vue?vue&type=template&id=1b9eb7f4&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.dietOptions, function (item, __i0__) {\n    var $orig = _vm.__get_orig(item)\n    var g0 = _vm.dietPreferences.includes(item.value)\n    return {\n      $orig: $orig,\n      g0: g0,\n    }\n  })\n  var l1 = _vm.__map(_vm.avoidOptions, function (item, __i1__) {\n    var $orig = _vm.__get_orig(item)\n    var g1 = _vm.avoidFoods.includes(item.value)\n    return {\n      $orig: $orig,\n      g1: g1,\n    }\n  })\n  var l2 = _vm.__map(5, function (n, __i2__) {\n    var $orig = _vm.__get_orig(n)\n    var m0 = _vm.getLabel(n)\n    return {\n      $orig: $orig,\n      m0: m0,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n        l2: l2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./foodinfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./foodinfo.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"diet-form\">\n    <!-- 饮食喜好 -->\n    <view class=\"form-section\">\n      <text class=\"section-title\">饮食喜好（可多选）</text>\n      <checkbox-group @change=\"handleDietPreference\">\n        <view class=\"checkbox-grid\">\n          <label v-for=\"item in dietOptions\" :key=\"item.value\" class=\"checkbox-item\">\n            <checkbox :value=\"item.value\" :checked=\"dietPreferences.includes(item.value)\" color=\"#4CAF50\"/>\n            <text class=\"checkbox-label\">{{ item.label }}</text>\n          </label>\n        </view>\n      </checkbox-group>\n      <input \n        v-model=\"customDiet\" \n        placeholder=\"其他饮食习惯...\" \n        class=\"custom-input\"\n        @confirm=\"addCustomDiet\"\n      />\n    </view>\n\n    <!-- 忌口选项 -->\n    <view class=\"form-section\">\n      <text class=\"section-title\">忌口要求（可多选）</text>\n      <checkbox-group @change=\"handleAvoidFood\">\n        <view class=\"checkbox-grid\">\n          <label v-for=\"item in avoidOptions\" :key=\"item.value\" class=\"checkbox-item\">\n            <checkbox :value=\"item.value\" :checked=\"avoidFoods.includes(item.value)\" color=\"#4CAF50\"/>\n            <text class=\"checkbox-label\">{{ item.label }}</text>\n          </label>\n        </view>\n      </checkbox-group>\n      <input \n        v-model=\"customAvoid\" \n        placeholder=\"其他忌口要求...\" \n        class=\"custom-input\"\n        @confirm=\"addCustomAvoid\"\n      />\n    </view>\n\n    <!-- 改变意愿程度 -->\n    <view class=\"form-section\">\n      <text class=\"section-title\">改变意愿程度</text>\n      <view class=\"slider-container\">\n        <text>1</text>\n        <slider \n          :value=\"willingness\" \n          min=\"1\" \n          max=\"5\" \n          step=\"1\" \n          activeColor=\"#4CAF50\"\n          backgroundColor=\"#E0E0E0\"\n          block-color=\"#ffffff\"\n          block-size=\"28\"\n          @changing=\"handleSliderChange\"\n        />\n        <text>5</text>\n      </view>\n      <view class=\"slider-labels\">\n        <text v-for=\"n in 5\" :key=\"n\" :class=\"{active: willingness === n}\">{{ getLabel(n) }}</text>\n      </view>\n    </view>\n\n    <!-- 提交按钮 -->\n    <button \n      class=\"submit-btn\" \n      :disabled=\"!isFormValid\" \n      @tap=\"handleSubmit\"\n    >\n      提交饮食信息\n    </button>\n\n    <!-- 状态提示 -->\n    <view v-if=\"submitStatus\" :class=\"['status-message', submitStatus.type]\">\n      {{ submitStatus.message }}\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      dietPreferences: [],\n      avoidFoods: [],\n      willingness: 3,\n      customDiet: '',\n      customAvoid: '',\n      dietOptions: [\n        { value: 'high_protein', label: '高蛋白' },\n        { value: 'low_fat', label: '低脂' },\n        { value: 'sugar_free', label: '无糖' },\n        { value: 'light', label: '清淡' },\n        { value: 'spicy', label: '辣' }\n      ],\n      avoidOptions: [\n        { value: 'seafood', label: '海鲜' },\n        { value: 'nuts', label: '坚果' },\n        { value: 'milk', label: '牛奶' }\n      ],\n      submitStatus: null\n    }\n  },\n  computed: {\n    isFormValid() {\n      return this.dietPreferences.length > 0 || this.avoidFoods.length > 0\n    }\n  },\n  methods: {\n    handleDietPreference(e) {\n      this.dietPreferences = e.detail.value\n    },\n    handleAvoidFood(e) {\n      this.avoidFoods = e.detail.value\n    },\n    handleSliderChange(e) {\n      this.willingness = e.detail.value\n    },\n    addCustomDiet() {\n      if (this.customDiet.trim()) {\n        this.dietPreferences.push(this.customDiet.trim())\n        this.customDiet = ''\n      }\n    },\n    addCustomAvoid() {\n      if (this.customAvoid.trim()) {\n        this.avoidFoods.push(this.customAvoid.trim())\n        this.customAvoid = ''\n      }\n    },\n    getLabel(n) {\n      const labels = ['完全不', '不太愿意', '一般', '比较愿意', '完全可以']\n      return labels[n - 1]\n    },\n    async handleSubmit() {\n      try {\n        const formData = {\n          preferences: [\n            ...this.dietPreferences,\n            ...(this.customDiet.trim() ? [this.customDiet.trim()] : [])\n          ],\n          avoids: [\n            ...this.avoidFoods,\n            ...(this.customAvoid.trim() ? [this.customAvoid.trim()] : [])\n          ],\n          willingness: this.willingness\n        }\n\n        const res = await uni.request({\n          url: '/api/submit-diet',\n          method: 'POST',\n          data: formData\n        })\n\n        this.submitStatus = { type: 'success', message: '提交成功！' }\n        this.resetForm()\n      } catch (error) {\n        this.submitStatus = { type: 'error', message: '提交失败，请重试' }\n      }\n    },\n    resetForm() {\n      this.dietPreferences = []\n      this.avoidFoods = []\n      this.willingness = 3\n      this.customDiet = ''\n      this.customAvoid = ''\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.diet-form {\n  padding: 30upx;\n  background: #f8fff8;\n}\n\n.form-section {\n  margin-bottom: 50upx;\n  padding: 30upx;\n  background: white;\n  border-radius: 20upx;\n  box-shadow: 0 4upx 12upx rgba(0, 0, 0, 0.05);\n}\n\n.section-title {\n  display: block;\n  font-size: 34upx;\n  color: #2d4059;\n  margin-bottom: 30upx;\n  font-weight: 600;\n}\n\n.checkbox-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20upx;\n}\n\n.checkbox-item {\n  flex: 0 0 calc(50% - 10upx);\n  display: flex;\n  align-items: center;\n  padding: 20upx;\n  border: 2upx solid #e0e0e0;\n  border-radius: 12upx;\n  transition: all 0.3s ease;\n\n  &.checked {\n    border-color: #4CAF50;\n    background: #f0fff4;\n  }\n}\n\n.checkbox-label {\n  margin-left: 15upx;\n  font-size: 28upx;\n}\n\n.custom-input {\n  margin-top: 30upx;\n  padding: 24upx;\n  border: 2upx solid #e0e0e0;\n  border-radius: 12upx;\n  font-size: 28upx;\n}\n\n.slider-container {\n  display: flex;\n  align-items: center;\n  gap: 30upx;\n  padding: 20upx 0;\n}\n\n.slider-labels {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20upx;\n  text {\n    font-size: 24upx;\n    color: #666;\n    &.active {\n      color: #4CAF50;\n      font-weight: bold;\n    }\n  }\n}\n\n.submit-btn {\n  background: #4CAF50;\n  color: white;\n  font-size: 32upx;\n  border-radius: 12upx;\n  padding: 28upx;\n  margin: 40upx 0;\n\n  &[disabled] {\n    background: #cccccc;\n  }\n}\n\n.status-message {\n  padding: 30upx;\n  border-radius: 12upx;\n  text-align: center;\n  &.success {\n    background: #e8f5e9;\n    color: #45a049;\n  }\n  &.error {\n    background: #ffebee;\n    color: #ff4444;\n  }\n}\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./foodinfo.vue?vue&type=style&index=0&id=1b9eb7f4&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./foodinfo.vue?vue&type=style&index=0&id=1b9eb7f4&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1742284096948\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}