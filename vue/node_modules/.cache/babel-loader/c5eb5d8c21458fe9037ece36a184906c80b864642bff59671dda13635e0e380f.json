{"ast":null,"code":"export default {\n  name: \"Exercise\",\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      exercise_name: '',\n      exercise_category: '',\n      formVisible: false,\n      form: {},\n      rules: {\n        exercise_name: [{\n          required: true,\n          message: '请输入运动名称',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 20,\n          message: '长度在 2 到 20 个字符',\n          trigger: 'blur'\n        }],\n        exercise_category: [{\n          required: true,\n          message: '请选择运动类型',\n          trigger: 'change'\n        }],\n        calories_burn_rate: [{\n          required: true,\n          message: '请输入消耗量',\n          trigger: 'blur'\n        }, {\n          type: 'number',\n          message: '必须为数字值',\n          trigger: 'blur'\n        }]\n      },\n      ids: []\n    };\n  },\n  created() {\n    this.load(1);\n  },\n  methods: {\n    handleAdd() {\n      this.form = {\n        calories_burn_rate: 10\n      }; // 设置默认值\n      this.formVisible = true;\n    },\n    handleEdit(row) {\n      this.form = JSON.parse(JSON.stringify(row));\n      this.formVisible = true;\n    },\n    save() {\n      this.$refs.formRef.validate(valid => {\n        if (valid) {\n          this.$request({\n            url: this.form.exercise_id ? '/exercise/update' : '/exercise/add',\n            method: this.form.exercise_id ? 'PUT' : 'POST',\n            data: this.form\n          }).then(res => {\n            if (res.code === 200) {\n              this.$message.success('保存成功');\n              this.load(1);\n              this.formVisible = false;\n            } else {\n              this.$message.error(res.msg);\n            }\n          });\n        }\n      });\n    },\n    del(id) {\n      this.$confirm('确认删除该运动记录？', '警告', {\n        type: 'warning'\n      }).then(() => {\n        this.$request.delete(`/exercise/delete/${id}`).then(res => {\n          res.code === 200 && this.load(1);\n          this.$message[res.code === 200 ? 'success' : 'error'](res.msg || '操作成功');\n        });\n      });\n    },\n    handleSelectionChange(rows) {\n      this.ids = rows.map(v => v.exercise_id);\n    },\n    delBatch() {\n      if (!this.ids.length) return this.$message.warning('请选择数据');\n      this.$confirm('确认批量删除选中记录？', '警告', {\n        type: 'warning'\n      }).then(() => {\n        this.$request.delete('/exercise/delete/batch', {\n          data: this.ids\n        }).then(res => {\n          res.code === 200 && this.load(1);\n          this.$message[res.code === 200 ? 'success' : 'error'](res.msg || '操作成功');\n        });\n      });\n    },\n    load(pageNum) {\n      if (pageNum) this.pageNum = pageNum;\n      this.$request.get('/exercise/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          exercise_name: this.exercise_name,\n          exercise_category: this.exercise_category\n        }\n      }).then(res => {\n        this.tableData = res.data?.list;\n        this.total = res.data?.total;\n      });\n    },\n    reset() {\n      this.exercise_name = null;\n      this.exercise_category = null;\n      this.load(1);\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load(pageNum);\n    }\n  }\n};","map":{"version":3,"names":["name","data","tableData","pageNum","pageSize","total","exercise_name","exercise_category","formVisible","form","rules","required","message","trigger","min","max","calories_burn_rate","type","ids","created","load","methods","handleAdd","handleEdit","row","JSON","parse","stringify","save","$refs","formRef","validate","valid","$request","url","exercise_id","method","then","res","code","$message","success","error","msg","del","id","$confirm","delete","handleSelectionChange","rows","map","v","delBatch","length","warning","get","params","list","reset","handleCurrentChange"],"sources":["src/views/manager/Exercise.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"search\">\n      <el-input placeholder=\"运动名称\" style=\"width: 200px\" v-model=\"exercise_name\"></el-input>\n      <el-select placeholder=\"运动类型\" style=\"width: 120px; margin-left: 10px\" v-model=\"exercise_category\">\n        <el-option label=\"全部\" value=\"\"></el-option>\n        <el-option label=\"有氧运动\" value=\"有氧运动\"></el-option>\n        <el-option label=\"力量训练\" value=\"力量训练\"></el-option>\n        <el-option label=\"球类运动\" value=\"球类运动\"></el-option>\n        <el-option label=\"游泳\" value=\"游泳\"></el-option>\r\n\t\t<el-option label=\"冬季运动\" value=\"冬季运动\"></el-option>\r\n\t\t<el-option label=\"武术格斗\" value=\"武术格斗\"></el-option>\r\n\t\t<el-option label=\"休闲运动\" value=\"休闲运动\"></el-option>\r\n\t\t<el-option label=\"极限运动\" value=\"极限运动\"></el-option>\n      </el-select>\n      <el-button type=\"info\" plain style=\"margin-left: 10px\" @click=\"load(1)\">搜索</el-button>\n      <el-button type=\"warning\" plain @click=\"reset\">重置</el-button>\n    </div>\n\n    <div class=\"operation\">\n      <el-button type=\"primary\" plain @click=\"handleAdd\">新增运动</el-button>\n      <el-button type=\"danger\" plain @click=\"delBatch\">批量删除</el-button>\n    </div>\n\n    <div class=\"table\">\n      <el-table :data=\"tableData\" stripe @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"exercise_id\" label=\"ID\" width=\"80\" align=\"center\" sortable></el-table-column>\n        <el-table-column prop=\"exercise_name\" label=\"运动名称\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"exercise_category\" label=\"运动类型\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"calories_burn_rate\" label=\"消耗卡路里/10分钟\" width=\"150\" align=\"center\"></el-table-column>\n        \n        <el-table-column label=\"操作\" width=\"150\" align=\"center\">\n          <template v-slot=\"scope\">\n            <el-button type=\"primary\" plain size=\"mini\" @click=\"handleEdit(scope.row)\">编辑</el-button>\n            <el-button type=\"danger\" plain size=\"mini\" @click=\"del(scope.row.exercise_id)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div class=\"pagination\">\n        <el-pagination\n            background\n            @current-change=\"handleCurrentChange\"\n            :current-page=\"pageNum\"\n            :page-size=\"pageSize\"\n            layout=\"total, prev, pager, next\"\n            :total=\"total\">\n        </el-pagination>\n      </div>\n    </div>\n\n    <el-dialog :title=\"form.exercise_id ? '编辑运动' : '新增运动'\" :visible.sync=\"formVisible\" width=\"30%\" \n               :close-on-click-modal=\"false\" destroy-on-close>\n      <el-form label-width=\"120px\" style=\"padding-right: 30px\" :model=\"form\" :rules=\"rules\" ref=\"formRef\">\n        <el-form-item label=\"运动名称\" prop=\"exercise_name\">\n          <el-input v-model=\"form.exercise_name\" placeholder=\"请输入运动名称\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"运动类型\" prop=\"exercise_category\">\n          <el-select v-model=\"form.exercise_category\" placeholder=\"请选择类型\" style=\"width: 100%\">\n            <el-option label=\"有氧运动\" value=\"有氧运动\"></el-option>\n            <el-option label=\"力量训练\" value=\"力量训练\"></el-option>\n            <el-option label=\"球类运动\" value=\"球类运动\"></el-option>\n            <el-option label=\"游泳\" value=\"游泳\"></el-option>\r\n\t\t    <el-option label=\"冬季运动\" value=\"冬季运动\"></el-option>\r\n\t\t    <el-option label=\"武术格斗\" value=\"武术格斗\"></el-option>\r\n\t\t    <el-option label=\"休闲运动\" value=\"休闲运动\"></el-option>\r\n\t\t    <el-option label=\"极限运动\" value=\"极限运动\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"消耗卡路里\" prop=\"calories_burn_rate\">\n          <el-input-number \n            v-model=\"form.calories_burn_rate\" \n            :min=\"1\" \n            :precision=\"0\"\n            controls-position=\"right\" \n            style=\"width: 100%\"\n            placeholder=\"每10分钟消耗量\"></el-input-number>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"formVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Exercise\",\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      exercise_name: '',\n      exercise_category: '',\n      formVisible: false,\n      form: {},\n      rules: {\n        exercise_name: [\n          { required: true, message: '请输入运动名称', trigger: 'blur' },\n          { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\n        ],\n        exercise_category: [\n          { required: true, message: '请选择运动类型', trigger: 'change' }\n        ],\n        calories_burn_rate: [\n          { required: true, message: '请输入消耗量', trigger: 'blur' },\n          { type: 'number', message: '必须为数字值', trigger: 'blur' }\n        ]\n      },\n      ids: []\n    }\n  },\n  created() {\n    this.load(1)\n  },\n  methods: {\n    handleAdd() {\n      this.form = { calories_burn_rate: 10 } // 设置默认值\n      this.formVisible = true\n    },\n    handleEdit(row) {\n      this.form = JSON.parse(JSON.stringify(row))\n      this.formVisible = true\n    },\n    save() {\n      this.$refs.formRef.validate(valid => {\n        if (valid) {\n          this.$request({\n            url: this.form.exercise_id ? '/exercise/update' : '/exercise/add',\n            method: this.form.exercise_id ? 'PUT' : 'POST',\n            data: this.form\n          }).then(res => {\n            if (res.code === 200) {\n              this.$message.success('保存成功')\n              this.load(1)\n              this.formVisible = false\n            } else {\n              this.$message.error(res.msg)\n            }\n          })\n        }\n      })\n    },\n    del(id) {\n      this.$confirm('确认删除该运动记录？', '警告', { type: 'warning' }).then(() => {\n        this.$request.delete(`/exercise/delete/${id}`).then(res => {\n          res.code === 200 && this.load(1)\n          this.$message[res.code === 200 ? 'success' : 'error'](res.msg || '操作成功')\n        })\n      })\n    },\n    handleSelectionChange(rows) {\n      this.ids = rows.map(v => v.exercise_id)\n    },\n    delBatch() {\n      if (!this.ids.length) return this.$message.warning('请选择数据')\n      this.$confirm('确认批量删除选中记录？', '警告', { type: 'warning' }).then(() => {\n        this.$request.delete('/exercise/delete/batch', { data: this.ids }).then(res => {\n          res.code === 200 && this.load(1)\n          this.$message[res.code === 200 ? 'success' : 'error'](res.msg || '操作成功')\n        })\n      })\n    },\n    load(pageNum) {\n      if (pageNum) this.pageNum = pageNum\n      this.$request.get('/exercise/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          exercise_name: this.exercise_name,\n          exercise_category: this.exercise_category\n        }\n      }).then(res => {\n        this.tableData = res.data?.list \n        this.total = res.data?.total \n      })\n    },\n    reset() {\n      this.exercise_name = null\n      this.exercise_category = null\n      this.load(1)\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum\n      this.load(pageNum)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.search {\n  margin-bottom: 15px;\n}\n.operation {\n  margin: 10px 0;\n}\n.el-table .cell {\n  white-space: nowrap;\n}\n</style>"],"mappings":"AAyFA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAC,aAAA;MACAC,iBAAA;MACAC,WAAA;MACAC,IAAA;MACAC,KAAA;QACAJ,aAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA,EACA;QACAN,iBAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAG,kBAAA,GACA;UAAAL,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAI,IAAA;UAAAL,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAK,GAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAC,UAAA;MACA,KAAAb,IAAA;QAAAO,kBAAA;MAAA;MACA,KAAAR,WAAA;IACA;IACAe,WAAAC,GAAA;MACA,KAAAf,IAAA,GAAAgB,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,SAAA,CAAAH,GAAA;MACA,KAAAhB,WAAA;IACA;IACAoB,KAAA;MACA,KAAAC,KAAA,CAAAC,OAAA,CAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAC,QAAA;YACAC,GAAA,OAAAzB,IAAA,CAAA0B,WAAA;YACAC,MAAA,OAAA3B,IAAA,CAAA0B,WAAA;YACAlC,IAAA,OAAAQ;UACA,GAAA4B,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,IAAA;cACA,KAAAC,QAAA,CAAAC,OAAA;cACA,KAAArB,IAAA;cACA,KAAAZ,WAAA;YACA;cACA,KAAAgC,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;YACA;UACA;QACA;MACA;IACA;IACAC,IAAAC,EAAA;MACA,KAAAC,QAAA;QAAA7B,IAAA;MAAA,GAAAoB,IAAA;QACA,KAAAJ,QAAA,CAAAc,MAAA,qBAAAF,EAAA,IAAAR,IAAA,CAAAC,GAAA;UACAA,GAAA,CAAAC,IAAA,iBAAAnB,IAAA;UACA,KAAAoB,QAAA,CAAAF,GAAA,CAAAC,IAAA,gCAAAD,GAAA,CAAAK,GAAA;QACA;MACA;IACA;IACAK,sBAAAC,IAAA;MACA,KAAA/B,GAAA,GAAA+B,IAAA,CAAAC,GAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAhB,WAAA;IACA;IACAiB,SAAA;MACA,UAAAlC,GAAA,CAAAmC,MAAA,cAAAb,QAAA,CAAAc,OAAA;MACA,KAAAR,QAAA;QAAA7B,IAAA;MAAA,GAAAoB,IAAA;QACA,KAAAJ,QAAA,CAAAc,MAAA;UAAA9C,IAAA,OAAAiB;QAAA,GAAAmB,IAAA,CAAAC,GAAA;UACAA,GAAA,CAAAC,IAAA,iBAAAnB,IAAA;UACA,KAAAoB,QAAA,CAAAF,GAAA,CAAAC,IAAA,gCAAAD,GAAA,CAAAK,GAAA;QACA;MACA;IACA;IACAvB,KAAAjB,OAAA;MACA,IAAAA,OAAA,OAAAA,OAAA,GAAAA,OAAA;MACA,KAAA8B,QAAA,CAAAsB,GAAA;QACAC,MAAA;UACArD,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAE,aAAA,OAAAA,aAAA;UACAC,iBAAA,OAAAA;QACA;MACA,GAAA8B,IAAA,CAAAC,GAAA;QACA,KAAApC,SAAA,GAAAoC,GAAA,CAAArC,IAAA,EAAAwD,IAAA;QACA,KAAApD,KAAA,GAAAiC,GAAA,CAAArC,IAAA,EAAAI,KAAA;MACA;IACA;IACAqD,MAAA;MACA,KAAApD,aAAA;MACA,KAAAC,iBAAA;MACA,KAAAa,IAAA;IACA;IACAuC,oBAAAxD,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;MACA,KAAAiB,IAAA,CAAAjB,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}